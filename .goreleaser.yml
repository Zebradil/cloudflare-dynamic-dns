project_name: cloudflare-dynamic-dns
before:
  hooks:
    - go mod tidy
builds:
  - binary: cloudflare-dynamic-dns
    env:
      - CGO_ENABLED=0
    targets:
      - linux_amd64
      - linux_386
      - linux_arm64
      - linux_arm_6
      - linux_arm_7
      - linux_mips
      - linux_mipsle
      - linux_mips64
      - linux_mips64le
      - darwin_amd64
      - darwin_arm64
      - windows_amd64
      - windows_386
archives:
  - name_template: "{{ .ProjectName }}_{{ .Os }}_{{ .Arch }}{{ if .Arm }}v{{ .Arm }}{{ end }}"
    format_overrides:
      - goos: windows
        format: zip
    files:
      - LICENSE
      - README.md
      - systemd/*
checksum:
  name_template: checksums.txt
snapshot:
  name_template: "{{ incpatch .Version }}-next"
changelog:
  sort: asc
  filters:
    exclude:
      - "^docs:"
      - "^test:"
dockers:
  - goos: linux
    goarch: amd64
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-amd64
    use: buildx
    build_flag_templates:
      - --platform=linux/amd64
  - goos: linux
    goarch: "386"
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-386
    use: buildx
    build_flag_templates:
      - --platform=linux/386
  - goos: linux
    goarch: arm64
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-arm64
    use: buildx
    build_flag_templates:
      - --platform=linux/arm64
  - goos: linux
    goarch: arm
    goarm: "6"
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-arm-6
    use: buildx
    build_flag_templates:
      - --platform=linux/arm/6
  - goos: linux
    goarch: arm
    goarm: "7"
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-arm-7
    use: buildx
    build_flag_templates:
      - --platform=linux/arm/7
  - goos: linux
    goarch: mips
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mips
    use: buildx
    build_flag_templates:
      - --platform=linux/mips
  - goos: linux
    goarch: mipsle
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mipsle
    use: buildx
    build_flag_templates:
      - --platform=linux/mipsle
  - goos: linux
    goarch: mips64
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mips64
    use: buildx
    build_flag_templates:
      - --platform=linux/mips64
  - goos: linux
    goarch: mips64le
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mips64le
    use: buildx
    build_flag_templates:
      - --platform=linux/mips64le
  - goos: darwin
    goarch: amd64
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-darwin-amd64
    use: buildx
    build_flag_templates:
      - --platform=darwin/amd64
  - goos: darwin
    goarch: arm64
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-darwin-arm64
    use: buildx
    build_flag_templates:
      - --platform=darwin/arm64
  - goos: windows
    goarch: amd64
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-windows-amd64
    use: buildx
    build_flag_templates:
      - --platform=windows/amd64
  - goos: windows
    goarch: "386"
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-windows-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-windows-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-windows-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-windows-386
    use: buildx
    build_flag_templates:
      - --platform=windows/386
docker_manifests:
  - name_template: ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Tag }}-windows-386
  - name_template: ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}-windows-386
  - name_template: ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:{{ .Major }}.{{ .Minor }}-windows-386
  - name_template: ghcr.io/zebradil/cloudflare-dynamic-dns:latest
    image_templates:
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-386
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-arm-6
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-arm-7
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mips
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mipsle
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mips64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-linux-mips64le
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-darwin-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-darwin-arm64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-windows-amd64
      - ghcr.io/zebradil/cloudflare-dynamic-dns:latest-windows-386
